data = [
    {
        "question": "查分系统的密码修改过但忘记了，怎么办？",
        "answer": "点击查分页面登录框右下角的“忘记密码”，输入姓名和证件号码后系统会将重设密码的链接发送至考生在学信网报名时填写的邮箱中。",
    },
    {"question": "查询分数以后如何得知自己本专业的分数排名？", "answer": "学校不进行专业排名，考生可于3月上旬向报考学院咨询。"},
    {
        "question": "申请成绩复核是否需要纸质材料？复核结果何时公布？",
        "answer": "成绩复核无需纸质资料，在系统中申请即可。如对自命题科目成绩有异议，考生可于2月20日至3月2日登录上海交通大学研究生招生网申请成绩复核。3月4日10:00起再次登录上海交通大学研招网查询成绩复核结果，经核查无误则成绩无变化。",
    },
    {
        "question": "在上海交通大学成绩复核系统中无法找到想要复核的科目，该怎么办？",
        "answer": "请核对要复核的科目是否是统考科目，如果是统考科目则无需在上交大系统中操作。可按照如下流程进行申请：如对统考及联考科目考试成绩有异议，考生3月2日（星期一）9:00至3月3日（星期二）16:00可登录上海市教育考试院“上海招考热线”网站进行网上申请。3月4日（星期三）10:00起，考生可登录“上海招考热线”网站查询成绩复核结果。",
    },
    {
        "question": "准考证丢失了，如何找回准考证编号？",
        "answer": "考生可凭网报用户名和密码，登录中国研究生招生信息网再次下载打印《准考证》。",
    },
    {
        "question": "复试分数线、复试名单何时公布？",
        "answer": "学校2020年硕士研究生复试基本分数线公布及具体复试安排将根据上级主管部门工作部署和疫情防控情况适时公布，请考生安心做好复试准备，密切关注上海交通大学研究生招生网和所报考学院网站发布的复试时间、复试形式、复试要求等详细信息，并保持电子邮件、电话等联系方式畅通，确保复试工作顺利进行。",
    },
    {
        "question": "硕士研究生招生复试何时进行？形式是否有变化？",
        "answer": "疫情防控期间要保障师生生命安全和身体健康，要最大限度减少人员流动和聚集，因此我校研究生复试工作将根据疫情防控情况和上级主管部门部署，合理做出调整并及时向社会公布。请广大考生密切关注学校和报考学院的通知。",
    },
    {
        "question": "报考专业的招生人数多少？",
        "answer": "我已在考生报考期间已公布了各专业招生人数、已接收推免生人数和拟考试招生人数，供考生查阅和参考：https://yzb.sjtu.edu.cn/info/1005/2969.htm",
    },
    {
        "question": "少数民族高层次骨干人才计划和强军计划考生进入复试和被拟录取需要什么样的条件？",
        "answer": "报考少数民族高层次骨干人才计划和强军计划的考生，达到专项计划基本复试分数线的考生可进入复试。专项招生计划单列，择优录取，宁缺毋滥。",
    },
    {
        "question": "符合教育部相关加分政策的硕士生，应如何享受政策优惠？",
        "answer": "我校严格执行教育部有关硕士研究生招生考试的加分政策，请符合加分项目条件且有申请加分意向的考生，在我校公布基本复试分数线后，尽快联系我校研招办并提交相关证明材料。",
    },
    {
        "question": "关于调剂事宜？",
        "answer": "2020年第一志愿报考本校硕士生源比较充足，一般均不接受报考外校考生的调剂申请；报考本校的考生在学校复试基本分数线发布以后，可按需要接收调剂的相关院系发布的申请办法提出校内调剂申请；报考本校考生若满足教育部规定的调剂条件，可登录学信网申请校外调剂。校外招生单位的调剂信息，请考生密切关注学信网。",
    },
]

import json
import re
import jieba

jieba.load_userdict("./dict.txt")

reverse_index = {}
i = 0
for qa in data:
    q = qa["question"]
    q = re.sub(r"[^\w\s]", "", q)
    for char in q:
        if char not in reverse_index:
            reverse_index[char] = []
        reverse_index[char].append(i)
    seg_list = list(jieba.cut(q, cut_all=False))
    for seg in seg_list:
        if seg not in reverse_index:
            reverse_index[seg] = []
        reverse_index[seg].append(i)
    i += 1

out = {"data": data, "index": reverse_index}

with open("out.json", "w") as f:
    f.write(json.dumps(out, ensure_ascii=False, indent=4))
